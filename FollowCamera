using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class yBotCameraController : MonoBehaviour
{
    #region Private

    // Serializable
    [SerializeField]
    private Transform _followTransform;
    [SerializeField]
    private Vector3 _lookOffset = new Vector3(0, 1f, 0f);
    [SerializeField]
    private Vector3 _positionOffset = new Vector3(0f, -2f, 2.5f);
    [SerializeField]
    private float _smoothDampTime = 0.1f;

    // Fields
    private Vector3 _targetPosition;
    private Vector3 _velocityCamSmooth;

    #endregion

    // Initialize
    private void Start()
    {
        // Components
        _followTransform = GameObject.Find("yBot").transform as Transform;
    }

    // Late tick
    private void LateUpdate()
    {
        var lookAt = _followTransform.position + _lookOffset;
        _targetPosition = _followTransform.position - _positionOffset;

        // TODO: Collisions
        smoothPosition();
        transform.LookAt(lookAt);
    }

    // Smooths the position to the target position
    private void smoothPosition()
    {
        transform.position = Vector3.SmoothDamp(transform.position, _targetPosition, ref _velocityCamSmooth, _smoothDampTime);
    }
}
